#! /usr/bin/bash

source $(dirname $0)/../.env

if [ "$ENV_TYPE" = "prod" ]; then
    printf "\033[1;35m == DYNAMODB describe-tables AWS \033[0m\n"
    ENDPOINTURL=""
else
    printf "\033[1;36m == DYNAMODB describe-tables local \033[0m\n"
    ENDPOINTURL="--endpoint-url $DYNAMODB_LOCAL_URL"
fi

# Describe the messages table
aws dynamodb describe-table --table-name "$DYNAMODB_MESSAGES_TABLE" $ENDPOINTURL

# Scan and show messages table data
aws dynamodb scan --table-name "$DYNAMODB_MESSAGES_TABLE" $ENDPOINTURL --output table

# Scan and show conversations table data
aws dynamodb scan --table-name "$DYNAMODB_CONVERSATIONS_TABLE" $ENDPOINTURL --output table
