#!/usr/bin/bash
set -e

source $(dirname $0)/../.env

printf "\033[1;35m == Testing likes functionality on RDS \033[0m\n"

# Use RDS connection string
CONNECTION_URL="$CONNECTION_URL_DB"

# Check activities
printf "\033[1;33m == Checking activities with likes_count \033[0m\n"
psql "$CONNECTION_URL" -c "SELECT uuid, message, likes_count FROM public.activities ORDER BY created_at DESC LIMIT 5;"

# Check users for authentication
printf "\033[1;33m == Checking users for authentication \033[0m\n"
psql "$CONNECTION_URL" -c "SELECT uuid, handle, cognito_user_id FROM public.users LIMIT 3;"

printf "\033[1;32m == Like functionality test complete \033[0m\n"
