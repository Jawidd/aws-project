#!/usr/bin/env python3

import os
import urllib.request
import urllib.error
import sys
from dotenv import load_dotenv

load_dotenv()

backend_url = os.getenv("BACKEND_URL")
health_url = f"{backend_url}/api/health-check"

try:
    with urllib.request.urlopen(health_url, timeout=5) as response:
        status_code = response.getcode()
        if status_code == 200:
            print("FLASK is HEALTHYY")
            sys.exit(0)
        else:
            print("UNHEALTHY")
            sys.exit(1)

except Exception:
    print("FLASK is UNHEALTHY")
    sys.exit(1)
